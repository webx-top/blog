;(function(a,d){if(typeof(b)=="undefined"){if(typeof(window.T)!="undefined"){b=window.T;c=window.webx.parseTmpl}else{function c(e,f){return e.replace(/\{%([\w\.]*)%\}/g,function(n,k){var m=k.split("."),h=f[m.shift()];for(var j=0,g=m.length;j<g;j++){h=h[m[j]]}return typeof(h)!=="undefined"&&h!==null?h:""})}function b(e,f){if(f!=null){e=c(e,f)}return e}}}DBC2SBC=function(h){var e="",f,g;for(f=0;f<h.length;f++){g=h.charCodeAt(f);if(g>=65281&&g<=65373){e+=String.fromCharCode(h.charCodeAt(f)-65248)}else{if(g==12288){e+=String.fromCharCode(h.charCodeAt(f)-12288+32)}else{e+=h.charAt(f)}}}return e};a.testRemind=(function(){var f=a(window).width();var h=function(i){if(!i||!i.target){return}if(i.target.id!==a.testRemind.id&&a(i.target).parents("#"+a.testRemind.id).length===0){a.testRemind.hide()}},g=function(i){if(!i||!i.target){return}if(i.target.tagName.toLowerCase()!=="body"){a.testRemind.hide()}},e=function(){if(!a.testRemind.display){return}var i=a(window).width();if(Math.abs(f-i)>20){a.testRemind.hide();f=i}};return{id:"validateRemind",display:false,css:{padding:"8px 10px",borderColor:"#ccc",color:"#666",borderRadius:5,boxShadow:"2px 2px 4px rgba(0,0,0,.2)",backgroundColor:"#fff",lineHeight:"24px",fontSize:13},hide:function(){a("#"+this.id).remove();this.display=false;a(document).unbind({mousedown:h,keydown:g});a(window).unbind("resize",e)},bind:function(){a(document).bind({mousedown:h,keydown:g});a(window).bind("resize",e)}}})();OBJREG={EMAIL:"^[a-z0-9._%-]+@([a-z0-9-]+\\.)+[a-z]{2,4}$",NUMBER:"^\\-?\\d+(\\.\\d+)?$",URL:"^(http|https|ftp)\\:\\/\\/[a-z0-9\\-\\.]+\\.[a-z]{2,3}(:[a-z0-9]*)?\\/?([a-z0-9\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$",TEL:"^1\\d{10}$",ZIPCODE:"^\\d{6}$","prompt":{radio:b("请选择一个选项"),checkbox:b("如果要继续，请选中此框"),"select":b("请选择列表中的一项"),email:b("请输入电子邮件地址"),url:b("请输入网站地址"),tel:b("请输入手机号码"),number:b("请输入数值"),date:b("请输入日期"),pattern:b("内容格式不符合要求"),empty:b("请填写此字段"),multiple:b("多条数据使用逗号分隔")}};a.html5Attr=function(g,e){if(!g||!e){return d}if(document.querySelector){return a(g).attr(e)}else{var f;f=g.getAttributeNode(e);return f&&f.nodeValue!==""?f.nodeValue:d}};a.html5Validate=(function(){return{isSupport:(function(){return a('<input type="email">').attr("type")==="email"})(),isEmpty:function(g,f){f=f||a.html5Attr(g,"placeholder");var e=g.value;if(g.type!=="password"){e=a.trim(e)}if(e===""||e===f){return true}return false},isRegex:function(m,k,g){var f=m.value,i=f,j=m.getAttribute("type")+"";j=j.replace(/\W+$/,"");if(j!=="password"){i=a.trim(f);if(j!=="text"&&j!=="null"&&m.tagName.toLowerCase()!="textarea"){i=DBC2SBC(i)}if(i!==f){a(m).val(i)}}k=k||(function(){return a.html5Attr(m,"pattern")})()||(function(){return j&&a.map(j.split("|"),function(o){var n=OBJREG[o.toUpperCase()];if(n){return n}}).join("|")})();if(i===""||!k){return true}var h=a(m).hasProp("multiple"),l=new RegExp(k,g||"i");if(h&&!/^number|range$/i.test(j)){var e=true;a.each(i.split(","),function(n,o){o=a.trim(o);if(e&&!l.test(o)){e=false}});return e}else{return l.test(i)}return true},isOverflow:function(j){if(!j){return false}var k=a(j).attr("min"),f=a(j).attr("max"),i,g,e,h=j.value;if(!k&&!f){g=a(j).attr("data-min"),e=a(j).attr("data-max");if(g&&h.length<g){a(j).testRemind(b("至少输入{%min%}个字符",{min:g}));j.focus()}else{if(e&&h.length>e){a(j).testRemind(b("最多输入{%max%}个字符",{max:e}));a(j).selectRange(e,h.length)}else{return false}}}else{h=Number(h);i=Number(a(j).attr("step"))||1;if(k&&h<k){a(j).testRemind(b("值必须大于或等于")+k)}else{if(f&&h>f){a(j).testRemind(b("值必须小于或等于")+f)}else{if(i&&!/^\d+(\.0+)?$/.test((Math.abs((h-k||0))/i).toFixed(10))){a(j).testRemind(b("值无效"))}else{return false}}}j.focus();j.select()}return true},isAllpass:function(g,f){if(!g){return true}var i={labelDrive:true};params=a.extend({},i,f||{});if(g.size&&g.size()==1&&g.get(0).tagName.toLowerCase()=="form"){g=g.find(":input")}else{if(g.tagName&&g.tagName.toLowerCase()=="form"){g=a(g).find(":input")}}var e=this;var h=true,j=function(m,p,u){var s=a(m).attr("data-key"),q=a("label[for='"+m.id+"']"),t="",r;if(params.labelDrive){r=a.html5Attr(m,"placeholder");q.each(function(){var v=a(this).text();if(v!==r){t+=v.replace(/\*|:|：/g,"")}})}if(a(m).isVisible()){if(p=="radio"||p=="checkbox"){a(m).testRemind(OBJREG.prompt[p],{align:"left"});m.focus()}else{if(u=="select"||u=="empty"){a(m).testRemind((u=="empty"&&t)?b("您尚未输入")+t:OBJREG.prompt[u]);m.focus()}else{if(/^range|number$/i.test(p)&&Number(m.value)){a(m).testRemind(b("值无效"));m.focus();m.select()}else{var o=OBJREG.prompt[p]||OBJREG.prompt["pattern"];if(t){o=b("您输入的{%t%}格式不准确",{t:t})}if(p!="number"&&a(m).hasProp("multiple")){o+="，"+OBJREG.prompt["multiple"]
}a(m).testRemind(o);m.focus();m.select()}}}}else{var l=a(m).attr("data-target");var n=a("#"+l);if(n.size()==0){n=a("."+l)}var k;if(s){if(!/^radio|checkbox$/i.test(p)&&t){k=b("您尚未{%k%}{%t%}",{k:s,t:t})}else{k=b("您尚未{%k%}该项内容",{k:s})}}else{if(!/^radio|checkbox$/i.test(p)&&t){if(u=="empty"){k=b("您尚未输入{%t%}",{t:t})}else{k=b("您尚未选择{%t%}",{t:t})}}else{if(u=="empty"){k=b("您尚未输入该项内容")}else{k=b("您尚未选择该项内容")}}}if(n.size()){if(n.offset().top<a(window).scrollTop()){a(window).scrollTop(n.offset().top-50)}n.testRemind(k)}else{if(typeof(Alert)=="function"){Alert(k)}else{alert(k)}}}return false};g.each(function(){var n=this,m=n.getAttribute("type"),l=n.tagName.toLowerCase(),o=a(this).hasProp("required");if(m){var r=m.replace(/\W+$/,"");if(!params.hasTypeNormally&&a.html5Validate.isSupport&&m!=r){try{n.type=r}catch(q){}}m=r}if(h==false||n.disabled||m=="submit"||m=="reset"||m=="file"||m=="image"){return}if(m=="radio"&&o){var p=n.name?a("input[type='radio'][name='"+n.name+"']"):a(n),k=false;p.each(function(){if(k==false&&a(this).is(":checked")){k=true}});if(k==false){h=j(p.get(0),m,l)}}else{if(m=="checkbox"&&o&&!a(n).is(":checked")){h=j(n,m,l)}else{if(l=="select"&&o&&!n.value){h=j(n,m,l)}else{if((o&&e.isEmpty(n))||!(h=e.isRegex(n))){h?j(n,m,"empty"):j(n,m,l);h=false}else{if(e.isOverflow(n)){h=false}}}}}});return h}}})();a.fn.extend({isVisible:function(){return a(this).attr("type")!=="hidden"&&a(this).css("display")!=="none"&&a(this).css("visibility")!=="hidden"},hasProp:function(i){if(typeof i!=="string"){return d}var h=false;if(document.querySelector){var e=a(this).attr(i);if(e!==d&&e!==false){h=true}}else{var g=a(this).get(0).outerHTML,f=g.slice(0,g.search(/\/?['"]?>(?![^<]*<['"])/));h=new RegExp("\\s"+i+"\\b","i").test(f)}return h},selectRange:function(h,e){var g=a(this).get(0);if(g.createTextRange){var f=g.createTextRange();f.collapse(true);f.moveEnd("character",e);f.moveStart("character",h);f.select()}else{g.focus();g.setSelectionRange(h,e)}return this},testRemind:function(l,p){var h={size:6,align:"center",css:{maxWidth:280,backgroundColor:"#FFFFE0",borderColor:"#F7CE39",color:"#333",fontSize:"12px",padding:"5px 10px",zIndex:2020}};p=p||{};p.css=a.extend({},h.css,p.css||a.testRemind.css);var g=a.extend({},h,p||{});if(!l||!a(this).isVisible()){return}var f={"center":"50%","left":"15%","right":"85%"},k=f[g.align]||"50%";g.css.position="absolute";g.css.top="-99px";g.css.border="1px solid "+g.css.borderColor;if(a("#"+a.testRemind.id).size()){a.testRemind.hide()}this.remind=a('<div id="'+a.testRemind.id+'"><span class="icon-info-sign" style="font-size:1.2em;vertical-align:middle;color:#ffa830"></span> '+l+"</div>").css(g.css);a(document.body).append(this.remind);var o;if(!window.XMLHttpRequest&&(o=parseInt(g.css.maxWidth))&&this.remind.width()>o){this.remind.width(o)}var i=a(this).offset(),n="top";if(!i){return a(this)}var m=i.top-this.remind.outerHeight()-g.size;if(m<a(document).scrollTop()){n="bottom";m=i.top+a(this).outerHeight()+g.size}var e=function(v){var u="transparent",q="dashed",r="solid";var t={},w={width:0,height:0,overflow:"hidden",borderWidth:g.size+"px",position:"absolute"},s={};if(v==="before"){t={"top":{borderColor:[g.css.borderColor,u,u,u].join(" "),borderStyle:[r,q,q,q].join(" "),top:0},"bottom":{borderColor:[u,u,g.css.borderColor,""].join(" "),borderStyle:[q,q,r,q].join(" "),bottom:0}}}else{if(v==="after"){t={"top":{borderColor:g.css.backgroundColor+["",u,u,u].join(" "),borderStyle:[r,q,q,q].join(" "),top:-1},"bottom":{borderColor:[u,u,g.css.backgroundColor,""].join(" "),borderStyle:[q,q,r,q].join(" "),bottom:-1}}}else{t=null;w=null;s=null;return null}}s=a.extend({},t[n],w);return a("<"+v+"></"+v+">").css(s)};var j={width:2*g.size,left:k,marginLeft:(-1*g.size)+"px",height:g.size,textIndent:0,overflow:"hidden",position:"absolute"};if(n=="top"){j["bottom"]=-1*g.size}else{j["top"]=-1*g.size}this.remind.css({left:i.left,top:m,marginLeft:a(this).outerWidth()*0.5-this.remind.outerWidth()*parseInt(k)/100}).prepend(a("<div></div>").css(j).append(e("before")).append(e("after")));a.testRemind.display=true;a.testRemind.bind();return a(this)},html5Validate:function(j,e){var h={novalidate:true,submitEnabled:true,validate:function(){return true}};var i=a.extend({},h,e||{});if(a(this).length>0&&a(this).get(0).tagName.toLowerCase()!="form"){var f=a.html5Validate.isAllpass(a(this),i);if(f&&i.validate()&&a.isFunction(j)){f=j.call(this)}return f}var g=a(this).find(":input");if(a.html5Validate.isSupport){if(i.novalidate){a(this).attr("novalidate","novalidate")}else{g.each(function(){var k=this.getAttribute("type")+"",m=k.replace(/\W+$/,"");if(k!=m){try{this.type=m}catch(l){}}});i.hasTypeNormally=true}}if(i.submitEnabled){a(this).find(":disabled").each(function(){if(/^image|submit$/.test(this.type)){a(this).removeAttr("disabled")}})}a(this).bind("submit",function(){if(a.html5Validate.isAllpass(g,i)&&i.validate()&&a.isFunction(j)){j.call(this)}return false});return a(this)}})})(jQuery);